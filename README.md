# 股指期货跨品种套利策略复现与优化

## 📘 项目简介

本项目基于东证期货金工团队发布的《股指期货套利策略系列四：跨品种套利的基差、动量与季节性特征》研究报告进行策略复现与工程重构，旨在构建一个具备**良好可读性、可扩展性和模块化设计**的量化策略研究框架。

该策略主要基于以下三类信号构建时序组合交易策略：

- **基差信号**：利用不同品种主力合约与现货指数的年化基差差异构建套利信号；
- **动量信号**：基于指数价差序列构造多种技术指标，提取大小盘风格轮动趋势；
- **季节性信号**：根据历史统计分析月份效应，构建固定方向的低频择时信号。

---

## 🧱 目录结构（项目文件说明）

```bash
daily_futures_arbitrary_strategy/
├── src/
│   ├── main.py                # 项目主入口，控制运行流程
│   ├── config.py              # 全局参数配置，如品种列表、时间区间、路径、参数优化配置等
│   ├── data_utils.py          # 数据读取与预处理：CSV读取、价差、基差、波动率计算等
│   ├── signal_utils.py        # 策略信号计算模块：动量、季节性三类信号函数
│   ├── strategy_utils.py      # 信号合成与仓位决策模块
│   ├── backtest_utils.py      # 简单的回测引擎与绩效评估模块（可选类封装）
│   └── picture_utils.py       # 图表绘制模块
│   └── factor_selection.py    # 因子选择和参数优化模块
│   └── __init__.py            # 包结构标识文件
│
├── data/
│   ├── raw/                   # 存放原始下载数据（如 IC.csv、IF.csv）
│   └── signal/                # 可选，保存中间计算的因子值，如年化基差等
│
├── results/
│   └── net_value.png          # 策略净值曲线与绩效结果图表，每个多空组合共产出 6 份相关文件
│   └── factor_selection       # 因子选择结果文件
│
├── history/                   # 记录了每次因子策略或参数优化策略的结果，包含了 signal 和 results 两个文件夹   
├── requirements.txt           # 所需依赖包（如 pandas, matplotlib）
└── README.md                  # 本文件
````

---

## 🚀 快速开始（运行步骤）

> ⚠️ 运行前请确保电脑已配置好 Wind 和 iFind 的环境，如已完成请忽略

```bash
# 创建环境并安装依赖
pip install -r requirements.txt

# 运行策略主流程
python src/factor_selection.py
python src/main.py
```

---

## 📈 策略说明

策略收益主要来自三个部分：
- 首先是基差收敛带来的展期收益。由于股指期货合约在临近交割时，其价格与对应现货指数的价差（即基差）存在可预期的收敛过程，因此展期收益是跨品种多空对收益的重要组成部分。同时通过对多空组合进行收益分解可以得知，年化基差率的差越大，组合收益越大。因此本策略形成了“基差差越大，持仓越积极”的原则驱动交易方向和仓位强度，从而获得价差收敛带来的收益。
- 其次是跨品种价差的动量趋势收益。大小盘与行业风格的切换往往具有“慢变量”特征，趋势往往能够维持一段时间，因此动量型指标（如均线类、通道突破类、趋势强度类等）在跨品种价差上能够有效捕捉趋势性收益率。回测结果表明该部分呈现“胜率中等、盈亏比高”的特征，可以用来在行情顺畅阶段拉高收益。
- 最后是大小盘风格轮动中的季节性溢价，能够在特定时间窗口提供高胜率的交易机会。跨品种对在部分月份胜率更高，常与资金面、风险偏好和制度性时点相关。利用季节性对统一信号进行“时间加权”，能够在提升持仓质量和胜率稳定性。

本策略的开仓与调仓依托由基差信号、动量信号和季节性信号综合形成的交易信号，该信号同时体现持仓方向与仓位占比。基差信号提供价差回归与展期空间的结构性依据，动量信号承担择时职责，决定何时进出场，季节性信号则仅在历史胜率显著的月份发挥作用，其方向和强弱由历史统计决定。具体流程为：先将基差信号按 20%、动量信号按 80% 权重加总，得到一个连续型初始信号；随后计算历史月度胜率与 50% 的差值，以差值的绝对值作为时间加权权重，符号方向作为季节性信号，与初始信号进行二次合成，得到最终连续信号。为避免仓位过于分散而导致频繁调仓，将该连续信号按阈值映射为离散仓位，例如将介于 0.2（含）至 0.5（不含）之间的信号统一映射为 0.5，以此降低换手。策略在每日收盘后计算信号并在同一时刻执行调仓，确保执行节奏一致且避免信息滞后。

---

## 🔧 不足与后续工作规划

* 目前并未完善的部分
  * data_utilis 中关于原始数据加工的部分，核心需要解决的问题是通过金融数据平台读取期货和对应标的的数据，其中期货数据为日频数据，标的指数数据为一分钟级别高频数据。目前代码中对期货数据的处理较为完善，但分钟级数据的处理尚未形成完整函数并融入整体代码中，代码读取数据的逻辑为直接读取已加工好的现成数据。（高频数据处理相关代码data_processed.ipynb文件）
  * main 中关于研报中横截面策略的回测部分（由于核心策略是基于时间序列构建，故该部分尚未完善）
  * main 函数和 picture 函数中关于最终多个多空对的组合优化回测部分并未加入进去，该部分主要在 research.ipynb 中实现。
* 可扩展部分
  * factor_selection 中关于因子筛选和参数选择的逻辑，目前代码保留了充足的可扩展空间。
  * strategy 中关于不同维度信号合成部分仍存在可优化空间
  * 后续投入实盘时对数据提取和信号计算需要进行调整
  * 加入交易成本与滑点模型进行更加精准的回测
  * 与商品套利、期权策略进行组合优化

---

## 📞 联系方式 / 致谢

感谢东证期货金工团队的公开研究资料，如有问题欢迎联系或交流。
